---
import Layout from '../layouts/Layout.astro'
import Consultation from './index/Consultation.astro'
import {grayBody} from './Header.astro'

const { data } = Astro.props
---

<Layout page_name={`${data.title} — `}>
  <section data-section="index-hero" class="mt-[25vh] space-y-20">
    {data.blocks.map((block, index) => (
      <div class="flex flex-col gap-5">
        {/* Заголовок блока */}
        {block.heading && (
          <h1 
            transition:name={index === 0 && data.transition_name ? data.transition_name : undefined}
            class={`px-5 py-2 w-fit sm:w-auto mx-auto sm:mx-5 text-3xl sm:text-xl uppercase text-center sm:text-left ${grayBody}`}
          >
            {block.heading}
          </h1>
        )}

        {/* Текстовый блок */}
        {block.type === 'text' && block.paragraph && (
          <div class="mt-5 w-[40%] sm:w-[90%] sm:text-left mx-auto text-lg text-center sm:text-sm sm:mx-5 space-y-5">
            {Array.isArray(block.paragraph) 
              ? block.paragraph.map((text) => <p>{text}</p>)
              : <p>{block.paragraph}</p>
            }
          </div>
        )}

        {/* Список */}
        {block.type === 'list' && block.list && (
          <div class="flex justify-center">
            <div class={`w-fit max-w-[50%] sm:max-w-none sm:mx-5 px-8 py-6 sm:px-4 sm:py-3 rounded-lg ${grayBody} bg-opacity-70`}>
              {block.listType === 'numbered' ? (
                <ol class="list-decimal list-inside text-left space-y-2 text-base sm:text-sm max-w-[70ch]">
                  {block.list.map((item) => <li class="leading-relaxed">{item}</li>)}
                </ol>
              ) : (
                <ul class="list-disc list-inside text-left space-y-2 text-base sm:text-sm max-w-[70ch]">
                  {block.list.map((item) => <li class="leading-relaxed">{item}</li>)}
                </ul>
              )}
            </div>
          </div>
        )}
      </div>
    ))}
  </section>

  <Consultation classes="my-[15vh]" />
</Layout>
