---
import Layout from '../layouts/Layout.astro'
import Consultation from './index/Consultation.astro'
import {grayBody} from './Header.astro'

const { data } = Astro.props
---

<Layout page_name={`${data.title} — `}>
  <section data-section="index-hero" class="mt-[25vh] space-y-20 sm:space-y-10">
    {data.blocks.map((block, index) => (
      <div class="flex flex-col gap-5">
        {/* Заголовок блока */}
        {block.heading && (
          <h1 
            transition:name={index === 0 && data.transition_name ? data.transition_name : undefined}
            class={`px-5 py-2 w-fit sm:w-auto mx-auto sm:mx-5 text-3xl sm:text-xl uppercase text-center sm:text-left ${grayBody}`}
          >
            {block.heading}
          </h1>
        )}

        {/* Текстовый блок */}
        {block.type === 'text' && block.paragraph && (
          <div class="sm:px-1.5 w-[40%] sm:w-[90%] sm:text-left mx-auto text-lg text-center sm:text-sm sm:mx-5 space-y-5 sm:space-y-3">
            {Array.isArray(block.paragraph) 
              ? block.paragraph.map((text) => <p>{text}</p>)
              : <p>{block.paragraph}</p>
            }
          </div>
        )}

        {/* Список */}
        {block.type === 'list' && block.list && (
          <div class="flex justify-center">
            <div class={`w-fit max-w-[50%] sm:max-w-none sm:mx-5 px-8 py-6 sm:px-4 sm:py-3 rounded-lg ${grayBody} bg-opacity-70`}>
              {block.listType === 'numbered' ? (
                <ol class="list-decimal list-inside text-left space-y-2 text-base sm:text-sm max-w-[70ch]">
                  {block.list.map((item) => <li class="leading-relaxed">{item}</li>)}
                </ol>
              ) : (
                <ul class="list-disc list-inside text-left space-y-2 text-base sm:text-sm max-w-[70ch]">
                  {block.list.map((item) => <li class="leading-relaxed">{item}</li>)}
                </ul>
              )}
            </div>
          </div>
        )}

        {block.type === 'table' && block.table && (
          <div class="flex justify-center">
            <div class={`p-5 w-[40%] sm:w-[90%] mx-auto sm:text-sm ${grayBody}`}>
              <table class="w-full">
                {block.tableHeaders && (
                  <thead>
                    <tr class="border-b border-neutral-700">
                      <th class="h-10 px-2 font-medium text-left align-middle sm:font-normal text-neutral-500 sm:pb-2">
                        {block.tableHeaders[0]}
                      </th>
                      <th class="h-10 px-2 font-medium text-left align-middle sm:font-normal text-neutral-500 sm:pb-2">
                        {block.tableHeaders[1]}
                      </th>
                    </tr>
                  </thead>
                )}
                <tbody class="[&_tr:last-child]:border-0">
                  {block.table.map((row) => (
                    <tr class="duration-200 border-b border-neutral-700 hover:bg-neutral-800">
                      <td class="p-2 font-medium">{row.cell1}</td>
                      <td class="p-2">{row.cell2} {block.currency || 'рублей'}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        )}
      </div>
    ))}
  </section>

  <Consultation classes="my-[15vh]" />
   <div class='my-[20vh] sm:my-[15vh]'></div>
</Layout>
